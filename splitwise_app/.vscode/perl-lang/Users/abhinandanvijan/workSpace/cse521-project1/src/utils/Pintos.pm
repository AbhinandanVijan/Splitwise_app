{"vars":[{"line":4,"kind":13,"containerName":"main::","name":"$LOADER_SIZE","definition":"our"},{"definition":"my","localvar":"my","name":"%role2type","line":7,"containerName":null,"kind":13},{"kind":12,"line":7,"name":"KERNEL"},{"line":8,"kind":12,"name":"FILESYS"},{"kind":12,"line":9,"name":"SCRATCH"},{"kind":12,"line":10,"name":"SWAP"},{"line":11,"kind":13,"containerName":null,"name":"%type2role","definition":"my","localvar":"my"},{"name":"%role2type","line":11,"containerName":null,"kind":13},{"line":14,"containerName":"main::","kind":13,"definition":"our","name":"@role_order"},{"name":"%parts","definition":"our","line":38,"kind":13,"containerName":"main::"},{"detail":"($opt,$arg)","children":[{"line":45,"containerName":"set_part","kind":13,"definition":"my","localvar":"my","name":"$opt"},{"containerName":"set_part","kind":13,"line":45,"name":"$arg"},{"line":46,"kind":13,"containerName":"set_part","name":"$role","definition":"my","localvar":"my"},{"kind":13,"containerName":"set_part","line":46,"name":"$source"},{"name":"$opt","containerName":"set_part","kind":13,"line":46},{"line":48,"containerName":"set_part","kind":13,"name":"$role"},{"name":"$role","containerName":"set_part","kind":13,"line":48},{"containerName":"set_part","kind":13,"line":49,"name":"$source"},{"name":"$source","containerName":"set_part","kind":13,"line":49},{"containerName":"set_part","kind":13,"line":52,"name":"$parts"},{"name":"$role","line":52,"kind":13,"containerName":"set_part"},{"line":54,"kind":13,"containerName":"set_part","name":"$role"},{"line":54,"kind":13,"containerName":"set_part","name":"$source"},{"line":54,"containerName":"set_part","kind":13,"name":"$arg"}],"kind":12,"signature":{"parameters":[{"label":"$opt"},{"label":"$arg"}],"label":"set_part($opt,$arg)","documentation":" set_part($opt, $arg)\n\n For use as a helper function for Getopt::Long::GetOptions to set\n disk sources."},"name":"set_part","definition":"sub","range":{"end":{"line":55,"character":9999},"start":{"line":44,"character":0}},"containerName":"main::","line":44},{"name":"do_set_part","kind":12,"line":54},{"detail":"($role,$source,$arg)","children":[{"line":63,"kind":13,"containerName":"do_set_part","definition":"my","localvar":"my","name":"$role"},{"name":"$source","containerName":"do_set_part","kind":13,"line":63},{"name":"$arg","kind":13,"containerName":"do_set_part","line":63},{"kind":13,"containerName":"do_set_part","line":65,"name":"$p","localvar":"my","definition":"my"},{"name":"$parts","containerName":"do_set_part","kind":13,"line":65},{"line":65,"containerName":"do_set_part","kind":13,"name":"$role"},{"kind":13,"containerName":"do_set_part","line":66,"name":"$source"},{"name":"$arg","kind":13,"containerName":"do_set_part","line":67},{"name":"$p","kind":13,"containerName":"do_set_part","line":72},{"containerName":"do_set_part","kind":13,"line":72,"name":"$arg"},{"name":"$p","kind":13,"containerName":"do_set_part","line":73},{"name":"$p","kind":13,"containerName":"do_set_part","line":74},{"line":74,"kind":13,"containerName":"do_set_part","name":"$arg"},{"line":75,"containerName":"do_set_part","kind":13,"name":"$source"},{"name":"%pt","definition":"my","localvar":"my","line":76,"containerName":"do_set_part","kind":13},{"line":76,"kind":13,"containerName":"do_set_part","name":"$arg"},{"definition":"my","localvar":"my","name":"$sp","line":77,"kind":13,"containerName":"do_set_part"},{"name":"$pt","line":77,"kind":13,"containerName":"do_set_part"},{"name":"$role","containerName":"do_set_part","kind":13,"line":77},{"line":78,"containerName":"do_set_part","kind":13,"name":"$sp"},{"kind":13,"containerName":"do_set_part","line":80,"name":"$p"},{"name":"$arg","kind":13,"containerName":"do_set_part","line":80},{"kind":13,"containerName":"do_set_part","line":81,"name":"$p"},{"line":81,"containerName":"do_set_part","kind":13,"name":"$sp"},{"containerName":"do_set_part","kind":13,"line":82,"name":"$p"},{"name":"$sp","line":82,"kind":13,"containerName":"do_set_part"},{"name":"$source","line":83,"containerName":"do_set_part","kind":13},{"line":84,"containerName":"do_set_part","kind":13,"name":"$arg"},{"line":86,"kind":13,"containerName":"do_set_part","name":"$p"},{"name":"$p","line":87,"kind":13,"containerName":"do_set_part"},{"name":"$p","line":88,"containerName":"do_set_part","kind":13},{"name":"$arg","line":88,"containerName":"do_set_part","kind":13}],"kind":12,"signature":{"documentation":" do_set_part($role, $source, $arg)\n\n Sets partition $role as coming from $source (one of 'file', 'from',\n or 'size').  $arg is a file name for 'file' or 'from', a size in\n megabytes for 'size'.","label":"do_set_part($role,$source,$arg)","parameters":[{"label":"$role"},{"label":"$source"},{"label":"$arg"}]},"definition":"sub","name":"do_set_part","containerName":"main::","line":62,"range":{"end":{"character":9999,"line":92},"start":{"line":62,"character":0}}},{"line":67,"kind":12,"name":"read_mbr"},{"name":"FILE","line":72,"kind":12},{"name":"OFFSET","kind":12,"line":73},{"kind":12,"line":74,"name":"BYTES"},{"line":76,"kind":12,"name":"read_partition_table"},{"kind":12,"line":80,"name":"FILE"},{"line":81,"kind":12,"name":"OFFSET"},{"kind":12,"line":81,"name":"START"},{"kind":12,"line":82,"name":"BYTES"},{"kind":12,"line":82,"name":"SECTORS"},{"name":"FILE","line":86,"kind":12},{"name":"OFFSET","kind":12,"line":87},{"name":"BYTES","kind":12,"line":88},{"line":88,"kind":12,"name":"ceil"},{"definition":"sub","name":"set_geometry","children":[{"containerName":"set_geometry","kind":13,"line":102,"name":"@geometry"},{"name":"@geometry","line":104,"containerName":"set_geometry","kind":13},{"line":106,"kind":13,"containerName":"set_geometry","name":"$geometry"},{"kind":13,"containerName":"set_geometry","line":107,"name":"$geometry"}],"kind":12,"containerName":"main::","line":99,"range":{"end":{"character":9999,"line":109},"start":{"line":99,"character":0}}},{"name":"set_align","definition":"sub","range":{"start":{"character":0,"line":115},"end":{"character":9999,"line":119}},"line":115,"containerName":"main::","children":[{"name":"$align","line":116,"kind":13,"containerName":"set_align"},{"containerName":"set_align","kind":13,"line":118,"name":"$align"},{"name":"$align","kind":13,"containerName":"set_align","line":118},{"line":118,"containerName":"set_align","kind":13,"name":"$align"}],"kind":12},{"detail":"(%args)","kind":12,"children":[{"line":148,"kind":13,"containerName":"assemble_disk","definition":"my","localvar":"my","name":"%args"},{"name":"%geometry","definition":"my","localvar":"my","line":150,"containerName":"assemble_disk","kind":13},{"kind":13,"containerName":"assemble_disk","line":150,"name":"$args"},{"containerName":"assemble_disk","kind":13,"line":152,"name":"$align","localvar":"my","definition":"my"},{"containerName":"assemble_disk","kind":13,"line":153,"localvar":"my","definition":"my","name":"$pad"},{"name":"$args","line":154,"containerName":"assemble_disk","kind":13},{"name":"$args","kind":13,"containerName":"assemble_disk","line":154},{"name":"$align","kind":13,"containerName":"assemble_disk","line":155},{"name":"$pad","containerName":"assemble_disk","kind":13,"line":156},{"line":157,"kind":13,"containerName":"assemble_disk","name":"$args"},{"name":"$align","line":158,"containerName":"assemble_disk","kind":13},{"name":"$pad","line":159,"containerName":"assemble_disk","kind":13},{"line":160,"containerName":"assemble_disk","kind":13,"name":"$args"},{"name":"$align","kind":13,"containerName":"assemble_disk","line":161},{"name":"$pad","containerName":"assemble_disk","kind":13,"line":161},{"name":"$format","localvar":"my","definition":"my","containerName":"assemble_disk","kind":13,"line":166},{"name":"$args","kind":13,"containerName":"assemble_disk","line":166},{"name":"$format","line":167,"containerName":"assemble_disk","kind":13},{"containerName":"assemble_disk","kind":13,"line":167,"name":"$format"},{"definition":"my","localvar":"my","name":"$part_cnt","line":170,"containerName":"assemble_disk","kind":13},{"name":"$args","containerName":"assemble_disk","kind":13,"line":170},{"containerName":"assemble_disk","kind":13,"line":170,"name":"%role2type"},{"name":"$format","kind":13,"containerName":"assemble_disk","line":172},{"name":"$part_cnt","containerName":"assemble_disk","kind":13,"line":172},{"localvar":"my","definition":"my","name":"$total_sectors","kind":13,"containerName":"assemble_disk","line":175},{"kind":13,"containerName":"assemble_disk","line":176,"name":"$format"},{"kind":13,"containerName":"assemble_disk","line":177,"name":"$total_sectors"},{"kind":13,"containerName":"assemble_disk","line":177,"name":"$align"},{"containerName":"assemble_disk","kind":13,"line":177,"name":"$geometry"},{"name":"$role","definition":"my","localvar":"my","line":179,"kind":13,"containerName":"assemble_disk"},{"name":"@role_order","line":179,"containerName":"assemble_disk","kind":13},{"definition":"my","localvar":"my","name":"$p","line":180,"containerName":"assemble_disk","kind":13},{"name":"$args","containerName":"assemble_disk","kind":13,"line":180},{"line":180,"containerName":"assemble_disk","kind":13,"name":"$role"},{"containerName":"assemble_disk","kind":13,"line":181,"name":"$p"},{"kind":13,"containerName":"assemble_disk","line":183,"name":"$p"},{"line":185,"kind":13,"containerName":"assemble_disk","name":"$bytes","definition":"my","localvar":"my"},{"name":"$p","containerName":"assemble_disk","kind":13,"line":185},{"line":186,"containerName":"assemble_disk","kind":13,"name":"$start","definition":"my","localvar":"my"},{"line":186,"containerName":"assemble_disk","kind":13,"name":"$total_sectors"},{"line":187,"kind":13,"containerName":"assemble_disk","name":"$end","definition":"my","localvar":"my"},{"line":187,"kind":13,"containerName":"assemble_disk","name":"$start"},{"name":"$bytes","line":187,"containerName":"assemble_disk","kind":13},{"name":"$end","line":188,"kind":13,"containerName":"assemble_disk"},{"containerName":"assemble_disk","kind":13,"line":188,"name":"$end"},{"kind":13,"containerName":"assemble_disk","line":188,"name":"%geometry"},{"kind":13,"containerName":"assemble_disk","line":188,"name":"$align"},{"name":"$p","line":190,"kind":13,"containerName":"assemble_disk"},{"name":"$args","line":190,"containerName":"assemble_disk","kind":13},{"name":"$p","containerName":"assemble_disk","kind":13,"line":191},{"kind":13,"containerName":"assemble_disk","line":191,"name":"$start"},{"name":"$p","line":192,"containerName":"assemble_disk","kind":13},{"name":"$end","kind":13,"containerName":"assemble_disk","line":192},{"name":"$start","kind":13,"containerName":"assemble_disk","line":192},{"containerName":"assemble_disk","kind":13,"line":193,"name":"$total_sectors"},{"line":193,"containerName":"assemble_disk","kind":13,"name":"$end"},{"kind":13,"containerName":"assemble_disk","line":197,"name":"$disk_fn","localvar":"my","definition":"my"},{"name":"$args","line":197,"kind":13,"containerName":"assemble_disk"},{"name":"$disk","definition":"my","localvar":"my","line":198,"containerName":"assemble_disk","kind":13},{"name":"$args","line":198,"kind":13,"containerName":"assemble_disk"},{"name":"$format","line":199,"kind":13,"containerName":"assemble_disk"},{"kind":13,"containerName":"assemble_disk","line":201,"name":"$loader","localvar":"my","definition":"my"},{"line":201,"containerName":"assemble_disk","kind":13,"name":"$args"},{"line":202,"containerName":"assemble_disk","kind":13,"name":"$mbr","definition":"my","localvar":"my"},{"name":"$loader","containerName":"assemble_disk","kind":13,"line":202},{"name":"$mbr","kind":13,"containerName":"assemble_disk","line":204},{"name":"$args","kind":13,"containerName":"assemble_disk","line":204},{"containerName":"assemble_disk","kind":13,"line":207,"name":"$mbr"},{"line":207,"kind":13,"containerName":"assemble_disk","name":"%geometry"},{"line":207,"kind":13,"containerName":"assemble_disk","name":"%args"},{"kind":13,"containerName":"assemble_disk","line":210,"name":"$mbr"},{"line":212,"kind":13,"containerName":"assemble_disk","name":"$mbr"},{"line":213,"kind":13,"containerName":"assemble_disk","name":"$disk"},{"kind":13,"containerName":"assemble_disk","line":213,"name":"$disk_fn"},{"name":"$mbr","line":213,"containerName":"assemble_disk","kind":13},{"kind":13,"containerName":"assemble_disk","line":214,"name":"$disk"},{"name":"$disk_fn","line":214,"containerName":"assemble_disk","kind":13},{"name":"$geometry","kind":13,"containerName":"assemble_disk","line":214},{"name":"$align","line":214,"containerName":"assemble_disk","kind":13}],"signature":{"parameters":[{"label":"%args"}],"label":"assemble_disk(%args)","documentation":" assemble_disk(%args)\n\n Creates a virtual disk $args{DISK} containing the partitions\n described by @args{KERNEL, FILESYS, SCRATCH, SWAP}.\n\n Required arguments:\n   DISK => output disk file name\n   HANDLE => output file handle (will be closed)\n\n Normally at least one of the following is included:\n   KERNEL, FILESYS, SCRATCH, SWAP => {input:\n\t\t\t\t       FILE => file to read,\n                                      OFFSET => byte offset in file,\n                                      BYTES => byte count from file,\n\n                                      output:\n\t\t\t\t       DISK => output disk file name,\n                                      START => sector offset in DISK,\n                                      SECTORS => sector count in DISK},\n\n Optional arguments:\n   ALIGN => 'bochs' (default), 'full', or 'none'\n   GEOMETRY => {H => heads, S => sectors per track} (default 16, 63)\n   FORMAT => 'partitioned' (default) or 'raw'\n   LOADER => $LOADER_SIZE-byte string containing the loader binary\n   ARGS => ['arg 1', 'arg 2', ...]"},"definition":"sub","name":"assemble_disk","containerName":"main::","line":147,"range":{"end":{"character":9999,"line":215},"start":{"character":0,"line":147}}},{"name":"GEOMETRY","line":150,"kind":12},{"name":"ALIGN","line":154,"kind":12},{"kind":12,"line":154,"name":"ALIGN"},{"kind":12,"line":157,"name":"ALIGN"},{"name":"ALIGN","kind":12,"line":160},{"line":166,"kind":12,"name":"FORMAT"},{"name":"DISK","kind":12,"line":183},{"kind":12,"line":185,"name":"BYTES"},{"name":"div_round_up","line":187,"kind":12},{"line":188,"kind":12,"name":"round_up"},{"name":"cyl_sectors","line":188,"kind":12},{"line":190,"kind":12,"name":"DISK"},{"name":"DISK","line":190,"kind":12},{"name":"START","line":191,"kind":12},{"name":"SECTORS","kind":12,"line":192},{"name":"DISK","line":197,"kind":12},{"name":"HANDLE","line":198,"kind":12},{"name":"LOADER","line":201,"kind":12},{"name":"make_kernel_command_line","kind":12,"line":204},{"name":"ARGS","kind":12,"line":204},{"name":"make_partition_table","kind":12,"line":207},{"name":"write_fully","kind":12,"line":213},{"kind":12,"line":214,"name":"write_zeros"},{"name":"$role","localvar":"my","definition":"my","containerName":null,"kind":13,"line":216},{"name":"@role_order","line":216,"kind":13,"containerName":null},{"definition":"my","localvar":"my","name":"$p","line":217,"containerName":null,"kind":13},{"name":"%args","line":217,"containerName":null,"kind":13},{"name":"$role","containerName":null,"kind":13,"line":217},{"line":218,"containerName":null,"kind":13,"name":"$p"},{"containerName":null,"kind":13,"line":220,"name":"$source","localvar":"my","definition":"my"},{"line":221,"containerName":null,"kind":13,"definition":"my","localvar":"my","name":"$fn"},{"name":"%p","line":221,"containerName":null,"kind":13},{"kind":12,"line":221,"name":"FILE"},{"line":222,"containerName":null,"kind":13,"name":"$source"},{"name":"$fn","line":222,"kind":13,"containerName":null},{"name":"%p","kind":13,"containerName":null,"line":223},{"kind":12,"line":223,"name":"OFFSET"},{"name":"$source","line":224,"kind":13,"containerName":null},{"name":"%p","kind":13,"containerName":null,"line":224},{"line":224,"kind":12,"name":"OFFSET"},{"name":"%p","line":224,"containerName":null,"kind":13},{"line":224,"kind":12,"name":"OFFSET"},{"name":"copy_file","line":227,"kind":12},{"name":"$source","containerName":null,"kind":13,"line":227},{"name":"$fn","line":227,"kind":13,"containerName":null},{"containerName":null,"kind":13,"line":227,"name":"$disk"},{"containerName":null,"kind":13,"line":227,"name":"$disk_fn"},{"line":227,"kind":13,"containerName":null,"name":"%p"},{"name":"BYTES","kind":12,"line":227},{"name":"$source","line":228,"kind":13,"containerName":null},{"name":"write_zeros","line":230,"kind":12},{"name":"$disk","line":230,"kind":13,"containerName":null},{"line":230,"containerName":null,"kind":13,"name":"$disk_fn"},{"name":"%p","containerName":null,"kind":13,"line":230},{"name":"SECTORS","kind":12,"line":230},{"name":"%p","line":230,"kind":13,"containerName":null},{"name":"BYTES","line":230,"kind":12},{"containerName":null,"kind":13,"line":232,"name":"%pad"},{"name":"$pad_sectors","definition":"my","localvar":"my","line":233,"kind":13,"containerName":null},{"kind":12,"line":233,"name":"round_up"},{"name":"$total_sectors","line":233,"containerName":null,"kind":13},{"kind":12,"line":233,"name":"cyl_sectors"},{"line":233,"kind":13,"containerName":null,"name":"%geometry"},{"name":"write_zeros","kind":12,"line":234},{"name":"$disk","line":234,"kind":13,"containerName":null},{"name":"$disk_fn","line":234,"containerName":null,"kind":13},{"containerName":null,"kind":13,"line":234,"name":"$pad_sectors"},{"containerName":null,"kind":13,"line":234,"name":"$total_sectors"},{"name":"$disk","kind":13,"containerName":null,"line":236},{"containerName":"main::","line":243,"range":{"start":{"line":243,"character":0},"end":{"line":261,"character":9999}},"definition":"sub","name":"make_partition_table","signature":{"parameters":[{"label":"$geometry"},{"label":"$partitions"}],"documentation":" make_partition_table({H => heads, S => sectors}, {KERNEL => ..., ...})\n\n Creates and returns a partition table for the given partitions and\n disk geometry.","label":"make_partition_table($geometry,$partitions)"},"kind":12,"children":[{"localvar":"my","definition":"my","name":"$geometry","kind":13,"containerName":"make_partition_table","line":244},{"name":"$partitions","kind":13,"containerName":"make_partition_table","line":244},{"line":245,"kind":13,"containerName":"make_partition_table","definition":"my","localvar":"my","name":"$table"},{"name":"$role","localvar":"my","definition":"my","kind":13,"containerName":"make_partition_table","line":246},{"line":246,"kind":13,"containerName":"make_partition_table","name":"@role_order"},{"name":"$p","definition":"my","localvar":"my","line":247,"containerName":"make_partition_table","kind":13},{"name":"$partitions","line":247,"kind":13,"containerName":"make_partition_table"},{"name":"$role","kind":13,"containerName":"make_partition_table","line":247},{"kind":13,"containerName":"make_partition_table","line":249,"name":"$end","localvar":"my","definition":"my"},{"name":"$p","kind":13,"containerName":"make_partition_table","line":249},{"kind":13,"containerName":"make_partition_table","line":249,"name":"$p"},{"name":"$bootable","localvar":"my","definition":"my","kind":13,"containerName":"make_partition_table","line":250},{"name":"$role","kind":13,"containerName":"make_partition_table","line":250},{"kind":13,"containerName":"make_partition_table","line":252,"name":"$table"},{"name":"$bootable","line":252,"containerName":"make_partition_table","kind":13},{"name":"$table","line":253,"kind":13,"containerName":"make_partition_table"},{"name":"$p","kind":13,"containerName":"make_partition_table","line":253},{"containerName":"make_partition_table","kind":13,"line":253,"name":"$geometry"},{"containerName":"make_partition_table","kind":13,"line":254,"name":"$table"},{"name":"$role2type","kind":13,"containerName":"make_partition_table","line":254},{"name":"$role","line":254,"containerName":"make_partition_table","kind":13},{"containerName":"make_partition_table","kind":13,"line":255,"name":"$table"},{"line":255,"containerName":"make_partition_table","kind":13,"name":"$end"},{"kind":13,"containerName":"make_partition_table","line":255,"name":"$geometry"},{"kind":13,"containerName":"make_partition_table","line":256,"name":"$table"},{"line":256,"kind":13,"containerName":"make_partition_table","name":"$p"},{"name":"$table","line":257,"kind":13,"containerName":"make_partition_table"},{"name":"$p","kind":13,"containerName":"make_partition_table","line":257},{"name":"$table","line":258,"containerName":"make_partition_table","kind":13},{"name":"$table","line":260,"kind":13,"containerName":"make_partition_table"}],"detail":"($geometry,$partitions)"},{"line":249,"kind":12,"name":"START"},{"line":249,"kind":12,"name":"SECTORS"},{"name":"pack_chs","line":253,"kind":12},{"kind":12,"line":253,"name":"START"},{"name":"pack_chs","line":255,"kind":12},{"name":"START","kind":12,"line":256},{"name":"SECTORS","line":257,"kind":12},{"name":"make_kernel_command_line","definition":"sub","range":{"end":{"character":9999,"line":272},"start":{"character":0,"line":267}},"containerName":"main::","line":267,"detail":"(@args)","children":[{"containerName":"make_kernel_command_line","kind":13,"line":268,"localvar":"my","definition":"my","name":"@args"},{"kind":13,"containerName":"make_kernel_command_line","line":269,"name":"$args","localvar":"my","definition":"my"},{"name":"@args","line":269,"kind":13,"containerName":"make_kernel_command_line"},{"line":270,"containerName":"make_kernel_command_line","kind":13,"name":"$args"},{"name":"@args","containerName":"make_kernel_command_line","kind":13,"line":271},{"line":271,"containerName":"make_kernel_command_line","kind":13,"name":"$args"}],"kind":12,"signature":{"parameters":[{"label":"@args"}],"documentation":" make_kernel_command_line(@args)\n\n Returns the raw bytes to write to an MBR at offset $LOADER_SIZE to\n set a Pintos kernel command line.","label":"make_kernel_command_line(@args)"}},{"definition":"sub","name":"copy_file","line":278,"containerName":"main::","range":{"start":{"character":0,"line":278},"end":{"line":289,"character":9999}},"detail":"($from_handle,$from_file_name,$to_handle,$to_file_name,$size)","kind":12,"children":[{"definition":"my","localvar":"my","name":"$from_handle","line":279,"kind":13,"containerName":"copy_file"},{"name":"$from_file_name","line":279,"kind":13,"containerName":"copy_file"},{"kind":13,"containerName":"copy_file","line":279,"name":"$to_handle"},{"containerName":"copy_file","kind":13,"line":279,"name":"$to_file_name"},{"line":279,"containerName":"copy_file","kind":13,"name":"$size"},{"line":281,"kind":13,"containerName":"copy_file","name":"$size"},{"name":"$chunk_size","definition":"my","localvar":"my","line":282,"kind":13,"containerName":"copy_file"},{"name":"$chunk_size","containerName":"copy_file","kind":13,"line":283},{"name":"$size","kind":13,"containerName":"copy_file","line":283},{"name":"$chunk_size","containerName":"copy_file","kind":13,"line":283},{"containerName":"copy_file","kind":13,"line":283,"name":"$size"},{"line":284,"kind":13,"containerName":"copy_file","name":"$size"},{"name":"$chunk_size","kind":13,"containerName":"copy_file","line":284},{"kind":13,"containerName":"copy_file","line":286,"localvar":"my","definition":"my","name":"$data"},{"name":"$from_handle","line":286,"containerName":"copy_file","kind":13},{"name":"$from_file_name","line":286,"containerName":"copy_file","kind":13},{"name":"$chunk_size","kind":13,"containerName":"copy_file","line":286},{"name":"$to_handle","containerName":"copy_file","kind":13,"line":287},{"line":287,"kind":13,"containerName":"copy_file","name":"$to_file_name"},{"line":287,"kind":13,"containerName":"copy_file","name":"$data"}],"signature":{"parameters":[{"label":"$from_handle"},{"label":"$from_file_name"},{"label":"$to_handle"},{"label":"$to_file_name"},{"label":"$size"}],"documentation":" copy_file($from_handle, $from_file_name, $to_handle, $to_file_name, $size)\n\n Copies $size bytes from $from_handle to $to_handle.\n $from_file_name and $to_file_name are used in error messages.","label":"copy_file($from_handle,$from_file_name,$to_handle,$to_file_name,$size)"}},{"kind":12,"line":286,"name":"read_fully"},{"name":"write_fully","kind":12,"line":287},{"detail":"($handle,$file_name,$bytes)","children":[{"name":"$handle","definition":"my","localvar":"my","line":296,"kind":13,"containerName":"read_fully"},{"name":"$file_name","containerName":"read_fully","kind":13,"line":296},{"name":"$bytes","kind":13,"containerName":"read_fully","line":296},{"line":297,"containerName":"read_fully","kind":13,"definition":"my","localvar":"my","name":"$data"},{"name":"$read_bytes","definition":"my","localvar":"my","line":298,"kind":13,"containerName":"read_fully"},{"name":"$handle","containerName":"read_fully","kind":13,"line":298},{"line":298,"containerName":"read_fully","kind":13,"name":"$data"},{"name":"$bytes","kind":13,"containerName":"read_fully","line":298},{"name":"$read_bytes","kind":13,"containerName":"read_fully","line":299},{"kind":13,"containerName":"read_fully","line":300,"name":"$read_bytes"},{"name":"$bytes","containerName":"read_fully","kind":13,"line":300},{"line":301,"containerName":"read_fully","kind":13,"name":"$data"}],"signature":{"parameters":[{"label":"$handle"},{"label":"$file_name"},{"label":"$bytes"}],"label":"read_fully($handle,$file_name,$bytes)","documentation":" read_fully($handle, $file_name, $bytes)\n\n Reads exactly $bytes bytes from $handle and returns the data read.\n $file_name is used in error messages."},"kind":12,"definition":"sub","name":"read_fully","containerName":"main::","line":295,"range":{"start":{"line":295,"character":0},"end":{"character":9999,"line":302}}},{"definition":"sub","name":"write_fully","containerName":"main::","line":308,"range":{"start":{"character":0,"line":308},"end":{"line":313,"character":9999}},"detail":"($handle,$file_name,$data)","children":[{"containerName":"write_fully","kind":13,"line":309,"localvar":"my","definition":"my","name":"$handle"},{"line":309,"containerName":"write_fully","kind":13,"name":"$file_name"},{"name":"$data","line":309,"containerName":"write_fully","kind":13},{"name":"$written_bytes","localvar":"my","definition":"my","kind":13,"containerName":"write_fully","line":310},{"name":"$handle","line":310,"kind":13,"containerName":"write_fully"},{"line":310,"containerName":"write_fully","kind":13,"name":"$data"},{"kind":13,"containerName":"write_fully","line":311,"name":"$written_bytes"},{"line":312,"kind":13,"containerName":"write_fully","name":"$written_bytes"},{"name":"$data","containerName":"write_fully","kind":13,"line":312}],"kind":12,"signature":{"documentation":" write_fully($handle, $file_name, $data)\n\n Write $data to $handle.\n $file_name is used in error messages.","label":"write_fully($handle,$file_name,$data)","parameters":[{"label":"$handle"},{"label":"$file_name"},{"label":"$data"}]}},{"detail":"($handle,$file_name,$size)","kind":12,"children":[{"definition":"my","localvar":"my","name":"$handle","line":316,"kind":13,"containerName":"write_zeros"},{"kind":13,"containerName":"write_zeros","line":316,"name":"$file_name"},{"containerName":"write_zeros","kind":13,"line":316,"name":"$size"},{"name":"$size","line":318,"containerName":"write_zeros","kind":13},{"name":"$chunk_size","localvar":"my","definition":"my","kind":13,"containerName":"write_zeros","line":319},{"name":"$chunk_size","line":320,"kind":13,"containerName":"write_zeros"},{"name":"$size","line":320,"kind":13,"containerName":"write_zeros"},{"line":320,"containerName":"write_zeros","kind":13,"name":"$chunk_size"},{"kind":13,"containerName":"write_zeros","line":320,"name":"$size"},{"name":"$size","line":321,"kind":13,"containerName":"write_zeros"},{"name":"$chunk_size","kind":13,"containerName":"write_zeros","line":321},{"containerName":"write_zeros","kind":13,"line":323,"name":"$handle"},{"containerName":"write_zeros","kind":13,"line":323,"name":"$file_name"},{"name":"$chunk_size","line":323,"containerName":"write_zeros","kind":13}],"signature":{"parameters":[{"label":"$handle"},{"label":"$file_name"},{"label":"$size"}],"label":"write_zeros($handle,$file_name,$size)","documentation":""},"name":"write_zeros","definition":"sub","range":{"end":{"line":325,"character":9999},"start":{"line":315,"character":0}},"containerName":"main::","line":315},{"name":"div_round_up","definition":"sub","range":{"start":{"line":331,"character":0},"end":{"character":9999,"line":334}},"containerName":"main::","line":331,"detail":"($x,$y)","children":[{"definition":"my","localvar":"my","name":"$x","line":332,"containerName":"div_round_up","kind":13},{"line":332,"kind":13,"containerName":"div_round_up","name":"$y"},{"name":"$x","line":333,"kind":13,"containerName":"div_round_up"},{"containerName":"div_round_up","kind":13,"line":333,"name":"$y"},{"name":"$y","line":333,"kind":13,"containerName":"div_round_up"}],"kind":12,"signature":{"parameters":[{"label":"$x"},{"label":"$y"}],"documentation":" div_round_up($x,$y)\n\n Returns $x / $y, rounded up to the nearest integer.\n $y must be an integer.","label":"div_round_up($x,$y)"}},{"kind":12,"line":333,"name":"ceil"},{"children":[{"containerName":"round_up","kind":13,"line":341,"name":"$x","localvar":"my","definition":"my"},{"line":341,"containerName":"round_up","kind":13,"name":"$y"},{"name":"$x","kind":13,"containerName":"round_up","line":342},{"name":"$y","containerName":"round_up","kind":13,"line":342},{"name":"$y","kind":13,"containerName":"round_up","line":342}],"kind":12,"signature":{"label":"round_up($x,$y)","documentation":" round_up($x, $y)\n\n Returns $x rounded up to the nearest multiple of $y.\n $y must be an integer.","parameters":[{"label":"$x"},{"label":"$y"}]},"detail":"($x,$y)","range":{"end":{"character":9999,"line":343},"start":{"line":340,"character":0}},"line":340,"containerName":"main::","name":"round_up","definition":"sub"},{"detail":"(%geometry)","kind":12,"signature":{"parameters":[{"label":"%geometry"}],"documentation":" cyl_sectors(H => heads, S => sectors)\n\n Returns the number of sectors in a cylinder of a disk with the given\n geometry.","label":"cyl_sectors(%geometry)"},"children":[{"name":"%geometry","definition":"my","localvar":"my","line":350,"containerName":"cyl_sectors","kind":13},{"name":"$geometry","line":351,"containerName":"cyl_sectors","kind":13},{"kind":13,"containerName":"cyl_sectors","line":351,"name":"$geometry"}],"definition":"sub","name":"cyl_sectors","containerName":"main::","line":349,"range":{"end":{"character":9999,"line":352},"start":{"line":349,"character":0}}},{"definition":"sub","name":"read_loader","line":359,"containerName":"main::","range":{"end":{"character":9999,"line":371},"start":{"line":359,"character":0}},"detail":"($name)","signature":{"documentation":" read_loader($file_name)\n\n Reads and returns the first $LOADER_SIZE bytes in $file_name.\n If $file_name is undefined, tries to find the default loader.\n Makes sure that the loader is a reasonable size.","label":"read_loader($name)","parameters":[{"label":"$name"}]},"children":[{"name":"$name","definition":"my","localvar":"my","line":360,"containerName":"read_loader","kind":13},{"name":"$name","line":361,"containerName":"read_loader","kind":13},{"line":361,"containerName":"read_loader","kind":13,"name":"$name"},{"name":"$name","line":362,"kind":13,"containerName":"read_loader"},{"line":364,"containerName":"read_loader","kind":13,"definition":"my","localvar":"my","name":"$handle"},{"kind":13,"containerName":"read_loader","line":365,"name":"$handle"},{"kind":13,"containerName":"read_loader","line":365,"name":"$name"},{"name":"$handle","line":366,"kind":13,"containerName":"read_loader"},{"name":"$LOADER_SIZE","line":366,"kind":13,"containerName":"read_loader"},{"name":"$handle","kind":13,"containerName":"read_loader","line":366},{"line":368,"kind":13,"containerName":"read_loader","name":"$loader"},{"name":"$handle","line":368,"containerName":"read_loader","kind":13},{"name":"$name","line":368,"kind":13,"containerName":"read_loader"},{"kind":13,"containerName":"read_loader","line":368,"name":"$LOADER_SIZE"},{"name":"$handle","line":369,"kind":13,"containerName":"read_loader"},{"name":"$loader","line":370,"containerName":"read_loader","kind":13}],"kind":12},{"name":"find_file","kind":12,"line":361},{"name":"pack_chs","definition":"sub","range":{"end":{"character":9999,"line":382},"start":{"character":0,"line":378}},"containerName":"main::","line":378,"detail":"($lba,$geometry)","kind":12,"children":[{"line":379,"containerName":"pack_chs","kind":13,"name":"$lba","definition":"my","localvar":"my"},{"kind":13,"containerName":"pack_chs","line":379,"name":"$geometry"},{"localvar":"my","definition":"my","name":"$cyl","containerName":"pack_chs","kind":13,"line":380},{"kind":13,"containerName":"pack_chs","line":380,"name":"$head"},{"name":"$sect","kind":13,"containerName":"pack_chs","line":380},{"containerName":"pack_chs","kind":13,"line":380,"name":"$lba"},{"containerName":"pack_chs","kind":13,"line":380,"name":"$geometry"},{"line":381,"containerName":"pack_chs","kind":13,"name":"$head"},{"name":"$sect","kind":13,"containerName":"pack_chs","line":381},{"line":381,"kind":13,"containerName":"pack_chs","name":"$cyl"},{"name":"$cyl","line":381,"kind":13,"containerName":"pack_chs"}],"signature":{"label":"pack_chs($lba,$geometry)","documentation":" pack_chs($lba, {H => heads, S => sectors})\n\n Converts logical sector $lba to a 3-byte packed geometrical sector\n in the format used in PC partition tables (see [Partitions]) and\n returns the geometrical sector as a 3-byte string.","parameters":[{"label":"$lba"},{"label":"$geometry"}]}},{"kind":12,"line":380,"name":"lba_to_chs"},{"line":388,"containerName":"main::","range":{"start":{"character":0,"line":388},"end":{"line":408,"character":9999}},"definition":"sub","name":"lba_to_chs","kind":12,"children":[{"localvar":"my","definition":"my","name":"$lba","kind":13,"containerName":"lba_to_chs","line":389},{"name":"$geometry","kind":13,"containerName":"lba_to_chs","line":389},{"localvar":"my","definition":"my","name":"$hpc","kind":13,"containerName":"lba_to_chs","line":390},{"name":"$geometry","kind":13,"containerName":"lba_to_chs","line":390},{"definition":"my","localvar":"my","name":"$spt","line":391,"containerName":"lba_to_chs","kind":13},{"name":"$geometry","containerName":"lba_to_chs","kind":13,"line":391},{"line":396,"containerName":"lba_to_chs","kind":13,"name":"$cyl","definition":"my","localvar":"my"},{"name":"$lba","kind":13,"containerName":"lba_to_chs","line":396},{"kind":13,"containerName":"lba_to_chs","line":396,"name":"$hpc"},{"kind":13,"containerName":"lba_to_chs","line":396,"name":"$spt"},{"line":397,"containerName":"lba_to_chs","kind":13,"definition":"my","localvar":"my","name":"$temp"},{"name":"$lba","line":397,"containerName":"lba_to_chs","kind":13},{"name":"$hpc","line":397,"kind":13,"containerName":"lba_to_chs"},{"name":"$spt","containerName":"lba_to_chs","kind":13,"line":397},{"definition":"my","localvar":"my","name":"$head","line":398,"kind":13,"containerName":"lba_to_chs"},{"name":"$temp","line":398,"kind":13,"containerName":"lba_to_chs"},{"containerName":"lba_to_chs","kind":13,"line":398,"name":"$spt"},{"definition":"my","localvar":"my","name":"$sect","line":399,"kind":13,"containerName":"lba_to_chs"},{"name":"$temp","line":399,"containerName":"lba_to_chs","kind":13},{"kind":13,"containerName":"lba_to_chs","line":399,"name":"$spt"},{"kind":13,"containerName":"lba_to_chs","line":403,"name":"$cyl"},{"kind":13,"containerName":"lba_to_chs","line":404,"name":"$cyl"},{"kind":13,"containerName":"lba_to_chs","line":404,"name":"$head"},{"line":404,"kind":13,"containerName":"lba_to_chs","name":"$sect"}],"signature":{"parameters":[{"label":"$lba"},{"label":"$geometry"}],"documentation":" lba_to_chs($lba, {H => heads, S => sectors})\n\n Returns the geometrical sector corresponding to logical sector $lba\n given the specified geometry.","label":"lba_to_chs($lba,$geometry)"},"detail":"($lba,$geometry)"},{"kind":2,"containerName":"","line":396,"name":"integer"},{"kind":12,"children":[{"definition":"my","localvar":"my","name":"$file","line":415,"containerName":"read_mbr","kind":13},{"localvar":"my","definition":"my","name":"$retval","containerName":"read_mbr","kind":13,"line":416},{"name":"$file","line":417,"kind":13,"containerName":"read_mbr"},{"name":"$mbr","localvar":"my","definition":"my","kind":13,"containerName":"read_mbr","line":421},{"line":422,"containerName":"read_mbr","kind":13,"name":"$mbr"},{"kind":13,"containerName":"read_mbr","line":423,"name":"$retval"},{"name":"$mbr","line":423,"kind":13,"containerName":"read_mbr"},{"kind":13,"containerName":"read_mbr","line":423,"name":"$mbr"},{"name":"$retval","line":426,"kind":13,"containerName":"read_mbr"}],"signature":{"label":"read_mbr($file)","documentation":" read_mbr($file)\n\n Tries to read an MBR from $file.  Returns the 512-byte MBR if\n successful, otherwise numeric 0.","parameters":[{"label":"$file"}]},"detail":"($file)","line":414,"containerName":"main::","range":{"start":{"line":414,"character":0},"end":{"line":427,"character":9999}},"definition":"sub","name":"read_mbr"},{"line":417,"kind":12,"name":"FILE"},{"name":"FILE","line":418,"kind":12},{"name":"FILE","line":420,"kind":12},{"kind":12,"line":422,"name":"FILE"},{"name":"FILE","line":425,"kind":12},{"detail":"($mbr,$disk)","kind":12,"children":[{"name":"$mbr","localvar":"my","definition":"my","kind":13,"containerName":"interpret_partition_table","line":434},{"kind":13,"containerName":"interpret_partition_table","line":434,"name":"$disk"},{"name":"%parts","definition":"my","localvar":"my","line":435,"containerName":"interpret_partition_table","kind":13},{"localvar":"my","definition":"my","name":"$i","containerName":"interpret_partition_table","kind":13,"line":436},{"localvar":"my","definition":"my","name":"$bootable","kind":13,"containerName":"interpret_partition_table","line":437},{"name":"$valid","line":437,"kind":13,"containerName":"interpret_partition_table"},{"line":437,"kind":13,"containerName":"interpret_partition_table","name":"$type"},{"line":437,"containerName":"interpret_partition_table","kind":13,"name":"$lba_start"},{"kind":13,"containerName":"interpret_partition_table","line":437,"name":"$lba_length"},{"name":"$mbr","line":438,"containerName":"interpret_partition_table","kind":13},{"name":"$i","containerName":"interpret_partition_table","kind":13,"line":438},{"kind":13,"containerName":"interpret_partition_table","line":439,"name":"$valid"},{"kind":13,"containerName":"interpret_partition_table","line":442,"name":"$bootable"},{"containerName":"interpret_partition_table","kind":13,"line":442,"name":"$bootable"},{"kind":13,"containerName":"interpret_partition_table","line":444,"name":"$role","localvar":"my","definition":"my"},{"name":"$type2role","line":444,"containerName":"interpret_partition_table","kind":13},{"kind":13,"containerName":"interpret_partition_table","line":444,"name":"$type"},{"name":"$type","line":446,"kind":13,"containerName":"interpret_partition_table"},{"line":446,"kind":13,"containerName":"interpret_partition_table","name":"$disk"},{"line":447,"containerName":"interpret_partition_table","kind":13,"name":"$role"},{"name":"$parts","line":450,"kind":13,"containerName":"interpret_partition_table"},{"name":"$role","containerName":"interpret_partition_table","kind":13,"line":450},{"containerName":"interpret_partition_table","kind":13,"line":452,"name":"$parts"},{"line":452,"containerName":"interpret_partition_table","kind":13,"name":"$role"},{"kind":13,"containerName":"interpret_partition_table","line":452,"name":"$lba_start"},{"containerName":"interpret_partition_table","kind":13,"line":453,"name":"$lba_length"},{"containerName":"interpret_partition_table","kind":13,"line":455,"name":"%parts"}],"signature":{"parameters":[{"label":"$mbr"},{"label":"$disk"}],"label":"interpret_partition_table($mbr,$disk)","documentation":" interpret_partition_table($mbr, $disk)\n\n Parses the partition-table in the specified 512-byte $mbr and\n returns the partitions.  $disk is used for error messages."},"definition":"sub","name":"interpret_partition_table","line":433,"containerName":"main::","range":{"start":{"line":433,"character":0},"end":{"character":9999,"line":456}}},{"name":"START","kind":12,"line":452},{"line":453,"kind":12,"name":"SECTORS"},{"detail":"($base_name)","children":[{"localvar":"my","definition":"my","name":"$base_name","containerName":"find_file","kind":13,"line":463},{"line":464,"kind":13,"containerName":"find_file","name":"$base_name"}],"kind":12,"signature":{"parameters":[{"label":"$base_name"}],"label":"find_file($base_name)","documentation":" find_file($base_name)\n\n Looks for a file named $base_name in a couple of likely spots.  If\n found, returns the name; otherwise, returns undef."},"definition":"sub","name":"find_file","containerName":"main::","line":462,"range":{"start":{"character":0,"line":462},"end":{"line":466,"character":9999}}},{"detail":"($file)","signature":{"parameters":[{"label":"$file"}],"documentation":" read_partition_table($file)\n\n Reads a partition table from $file and returns the parsed\n partitions.  Dies if partitions can't be read.","label":"read_partition_table($file)"},"children":[{"name":"$file","definition":"my","localvar":"my","line":473,"kind":13,"containerName":"read_partition_table"},{"containerName":"read_partition_table","kind":13,"line":474,"localvar":"my","definition":"my","name":"$mbr"},{"name":"$file","containerName":"read_partition_table","kind":13,"line":474},{"kind":13,"containerName":"read_partition_table","line":475,"name":"$mbr"},{"name":"$mbr","line":476,"kind":13,"containerName":"read_partition_table"},{"name":"$file","containerName":"read_partition_table","kind":13,"line":476}],"kind":12,"definition":"sub","name":"read_partition_table","line":472,"containerName":"main::","range":{"end":{"character":9999,"line":477},"start":{"character":0,"line":472}}},{"definition":"sub","name":"max","line":482,"containerName":"main::","children":[{"name":"$max","localvar":"my","definition":"my","kind":13,"containerName":"max","line":483},{"name":"$max","kind":13,"containerName":"max","line":485},{"line":485,"kind":13,"containerName":"max","name":"$max"},{"name":"$max","line":487,"kind":13,"containerName":"max"}],"kind":12,"range":{"end":{"line":488,"character":9999},"start":{"character":0,"line":482}}}],"version":5}